<%= render partial: "layouts/breadcrumbs", locals: {
   breadcrumbs: [
      {url: items_path, name: "All Items"}
      ]
   } 
%>
<h2>List of All Items across All Locations</h2>

<%= form_tag items_path, method: :get do %>
   <%= text_field_tag 'query', nil, placeholder: 'Search for item by name here...'%>
   <%= submit_tag "Search" %>
   <%= link_to  "Reset", items_path %>
<% end %>

<%# This should be refactored into a helper or a partial %>
<% if @items.empty? %>
   <p>You currently have no items.  Start by adding an item.</p>
<% else %>
   <% if @no_results %>
     <p><font color="red"><em><strong><%= @no_results %></strong></em></font></p>
   <% end %>

   <% @items.each do |item| %>
   <h3><em>Item: <%= link_to item.name, item_path(item) %></em></h3>
      <table>
         <thead>
            <tr>
               <th>Location</th>
               <th>Qty</th>
            </tr>
         </thead>

         <tbody>
            <% item.location_items.each do |loc_item| %>
               <tr>  
                  <td> <%= link_to  loc_item.location.name, location_item_path(loc_item.location, item) %></td>
                  <td><%= loc_item.quantity %></td>
               </tr>
            <% end %>
            <tr>
               <td><strong>Total:</strong></td>
               <td><strong><%= item.total_qty %></strong></td>
            </tr>
         </tbody>
      </table>
   <br>
   <% end %>
<% end %>

<%= link_to  "Go to List of Locations", locations_path %>
